build_script:

# copy module contents
- ps: New-Item AppVeyorBYOC -Type Directory | Out-Null
- ps: Copy-Item -Path appveyor-byoc-psm\* -Destination AppVeyorBYOC
- ps: New-Item AppVeyorBYOC\scripts -Type Directory | Out-Null
- ps: Copy-Item -Path scripts\* -Destination AppVeyorBYOC\scripts -Recurse
- ps: New-Item AppVeyorBYOC\hyper-v -Type Directory | Out-Null
- ps: Copy-Item -Path hyper-v\* -Destination AppVeyorBYOC\hyper-v -Recurse
- ps: New-Item AppVeyorBYOC\http -Type Directory | Out-Null
- ps: Copy-Item -Path http\* -Destination AppVeyorBYOC\http -Recurse
- ps: Copy-Item -Path AppVeyorBYOC-Common.ps1 -Destination AppVeyorBYOC
- ps: Copy-Item -Path Connect-*.ps1 -Destination AppVeyorBYOC
- ps: Copy-Item -Path *.json -Destination AppVeyorBYOC

# publish module
- ps: if ($env:APPVEYOR_REPO_BRANCH -eq 'master') {Update-ModuleManifest -Path AppVeyorBYOC\AppVeyorBYOC.psd1 -ModuleVersion $env:APPVEYOR_BUILD_VERSION} else {Update-ModuleManifest -Path AppVeyorBYOC\AppVeyorBYOC.psd1 -ModuleVersion $env:APPVEYOR_BUILD_VERSION -Prerelease "beta"}
- ps: Publish-Module -Path $env:APPVEYOR_BUILD_FOLDER\AppVeyorBYOC -NuGetApiKey $env:psg_api_key

test: off